{% extends 'base.html' %}

{% block head %}
<title>Task Master</title>
{% endblock %}

{% block body %} 

<p>Welcome back: {{current_user.username}}</p>
<a href="{{url_for('logout')}}">logout</a>
<div class="container my-5">
    <h3 class="mb-4">Task Manager</h3>

    {% if tasks|length < 1 %}
        <h4>There are no tasks. Create one below!</h4>
    {% else %}

        <div class="table-responsive">
            <table class="table table-bordered table-striped">
                <thead class="thead-dark">
                    <tr>
                        <th scope="col">Task</th>
                        <th scope="col">Added</th>
                        <th scope="col">Actions</th>
                    </tr>
                </thead>
                <tbody>
                {% for task in tasks %}
                    <tr>
                        <td>{{ task.content }}</td>
                        <td>{{ task.date_created.date() }}</td>
                        <td class="d-flex">
                            <a href="/delete/{{ task.id }}">
                                <i class="btn bi bi-trash"></i>
                            </a>
                            <br>
                            <a href="/update/{{ task.id }}"> 
                                <i class="btn bi bi-pencil"></i>
                            </a>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    {% endif %}
</div>

<div class="container">
    <form action="/" method="POST">
        <div class="form-group">
            <label for="content">Enter Tasks</label>
            <input type="text" class="form-control" id="content" name="content" placeholder="What needs doing?">
        </div>
        <input type="submit" class="btn btn-primary" value="Add Task">
    </form>
</div>

{% endblock %}